import{a as P,b as oe,d as re,f as le,g as me}from"./chunk-44TI3PCR.js";import{a as de}from"./chunk-RSYBQDDM.js";import{A as e,Aa as ie,B as i,C as u,Ca as ne,Da as ae,G as L,H as k,J as _,L as f,M as D,O as o,P as B,Y as H,a as C,b as S,ca as j,d as A,e as v,f as x,ha as U,j as E,k as N,ka as Y,la as z,ma as h,n as m,na as $,o as g,oa as J,p as M,q as F,ra as W,s as T,t as s,ta as K,u as p,ua as Q,va as X,w as V,wa as Z,x as q,xa as ee,y as O,ya as te,z as y}from"./chunk-A3WZPRQL.js";var w=class n{constructor(r){this.el=r}onInput(r){let t=r.target;t.value=t.value.replace(/[^0-9]/g,"")}static \u0275fac=function(t){return new(t||n)(g(N))};static \u0275dir=F({type:n,selectors:[["","appNumbersonly",""]],hostBindings:function(t,l){t&1&&_("input",function(d){return l.onInput(d)})}})};function pe(n,r){n&1&&L(0)}function ue(n,r){if(n&1&&T(0,pe,1,0,"ng-container",1),n&2){f();let t=D(3);y("ngTemplateOutlet",t)}}function fe(n,r){n&1&&(e(0,"p",70),o(1,"please select the building type."),i())}function _e(n,r){if(n&1&&(e(0,"div",19),s(1,fe,2,0,"p",70),i()),n&2){let t,l=f(2);m(),p((t=l.formGroup.get("type"))!=null&&t.hasError("required")?1:-1)}}function he(n,r){n&1&&(e(0,"p",70),o(1,"please enter the building name."),i())}function be(n,r){if(n&1&&(e(0,"div",19),s(1,he,2,0,"p",70),i()),n&2){let t,l=f(2);m(),p((t=l.formGroup.get("name"))!=null&&t.hasError("required")?1:-1)}}function ve(n,r){n&1&&(e(0,"p",70),o(1,"please enter Street Address."),i())}function xe(n,r){if(n&1&&(e(0,"div",19),s(1,ve,2,0,"p",70),i()),n&2){let t,l=f(2);m(),p((t=l.formGroup.get("streetAddress"))!=null&&t.hasError("required")?1:-1)}}function ge(n,r){n&1&&(e(0,"p",70),o(1,"please select the lease type."),i())}function Ce(n,r){if(n&1&&(e(0,"div",19),s(1,ge,2,0,"p",70),i()),n&2){let t,l=f(2);m(),p((t=l.formGroup.get("leaseType"))!=null&&t.hasError("required")?1:-1)}}function Se(n,r){n&1&&(e(0,"p",70),o(1,"please enter expected rent amount."),i())}function ye(n,r){if(n&1&&(e(0,"div",19),s(1,Se,2,0,"p",70),i()),n&2){let t,l=f(2);m(),p((t=l.formGroup.get("expectedRent"))!=null&&t.hasError("required")?1:-1)}}function Ee(n,r){n&1&&(e(0,"p",70),o(1,"please select furnished status."),i())}function Ne(n,r){if(n&1&&(e(0,"div",19),s(1,Ee,2,0,"p",70),i()),n&2){let t,l=f(2);m(),p((t=l.formGroup.get("furnished"))!=null&&t.hasError("required")?1:-1)}}function we(n,r){if(n&1){let t=k();e(0,"div",62)(1,"div",37)(2,"input",71),_("change",function(a){let d=v(t).$implicit,b=f(2);return x(b.onAmenityChange(a,d))}),i(),e(3,"label",72),o(4),i()()()}if(n&2){let t=r.$implicit;m(2),y("id",t),m(),y("for",t),m(),B(t)}}function Te(n,r){n&1&&(e(0,"p",70),o(1,"please enter rental title."),i())}function ke(n,r){if(n&1&&(e(0,"div",19),s(1,Te,2,0,"p",70),i()),n&2){let t,l=f(2);m(),p((t=l.formGroup.get("title"))!=null&&t.hasError("required")?1:-1)}}function Pe(n,r){n&1&&(e(0,"p",70),o(1,"please enter rental description."),i())}function Ie(n,r){if(n&1&&(e(0,"div",19),s(1,Pe,2,0,"p",70),i()),n&2){let t,l=f(2);m(),p((t=l.formGroup.get("description"))!=null&&t.hasError("required")?1:-1)}}function Re(n,r){if(n&1){let t=k();e(0,"div",2)(1,"button",3),_("click",function(){v(t);let a=f();return x(a.back())}),o(2,"back"),i()(),e(3,"div",4)(4,"h2",5),o(5,"Add New Rental Property"),i(),e(6,"p",6)(7,"i"),o(8,"- Fill in the details below to add your property to the rental marketplace."),i()(),e(9,"div",7)(10,"button",8),_("click",function(){v(t);let a=f();return x(a.discard())}),o(11,"Discard"),i(),e(12,"button",9),_("click",function(){v(t);let a=f();return x(a.preview())}),o(13,"Preview"),i(),e(14,"button",10),_("click",function(){v(t);let a=f();return x(a.addPost())}),o(15,"Publish Rental"),i()(),e(16,"div",11)(17,"div",12)(18,"select",13)(19,"option",14),o(20,"Select an option"),i(),e(21,"option",15),o(22,"Apartment"),i(),e(23,"option",16),o(24,"Building"),i()(),e(25,"label",17),o(26,"Choose your Apartment/Building"),e(27,"span",18),o(28,"*"),i()(),s(29,_e,2,1,"div",19),i(),e(30,"div",12),u(31,"input",20),e(32,"label",21),o(33,"Enter name of your building"),e(34,"span",18),o(35,"*"),i()(),s(36,be,2,1,"div",19),i()(),e(37,"div",22)(38,"label",23),o(39,"Is this a shared property?"),i(),e(40,"div",24),u(41,"input",25),e(42,"label",26),o(43,"Yes"),i()(),e(44,"div",24),u(45,"input",27),e(46,"label",28),o(47,"No"),i()()(),e(48,"div",29),u(49,"input",30),e(50,"label",31),o(51,"Street Address"),e(52,"span",18),o(53,"*"),i()(),s(54,xe,2,1,"div",19),i(),e(55,"div",32)(56,"div",12),u(57,"input",33),e(58,"label",34),o(59,"Square Feet"),i()(),e(60,"div",35)(61,"label",36),o(62,"Stay / Lease Type "),e(63,"span",18),o(64,"*"),i()(),e(65,"div",37),u(66,"input",38),e(67,"label",39),o(68,"Long term (6+ months)"),i()(),e(69,"div",37),u(70,"input",40),e(71,"label",41),o(72,"Short term"),i()(),e(73,"div",37),u(74,"input",42),e(75,"label",43),o(76,"Both"),i()(),s(77,Ce,2,1,"div",19),i()(),e(78,"div",22)(79,"label",44),o(80,"Expected Rent"),i(),e(81,"div",45)(82,"div",46),u(83,"input",47),e(84,"label",48),o(85,"Expected Rent ($)"),e(86,"span",18),o(87,"*"),i()(),s(88,ye,2,1,"div",19),i(),e(89,"div",49)(90,"div",37),u(91,"input",50),e(92,"label",51),o(93,"Negotiable"),i()()(),e(94,"div",52)(95,"label",36),o(96,"Price Mode"),i(),e(97,"div",37),u(98,"input",53),e(99,"label",54),o(100,"Per Month"),i()(),e(101,"div",37),u(102,"input",55),e(103,"label",56),o(104,"Utilities included"),i()()()()(),e(105,"div",22)(106,"label",23),o(107,"Is the room/apartment furnished?"),i(),e(108,"div",24),u(109,"input",57),e(110,"label",58),o(111,"Yes"),i()(),e(112,"div",24),u(113,"input",59),e(114,"label",60),o(115,"No"),i()(),s(116,Ne,2,1,"div",19),i(),e(117,"div",22)(118,"label",36),o(119,"Amenities Included"),i(),e(120,"div",61),q(121,we,5,3,"div",62,V),i()(),e(123,"div",63),u(124,"input",64),e(125,"label",65),o(126,"Add Title"),e(127,"span",18),o(128,"*"),i()(),s(129,ke,2,1,"div",19),i(),e(130,"div",29),u(131,"textarea",66),e(132,"label",67),o(133,"Enter a detailed description (max 1400 characters)"),e(134,"span",18),o(135,"*"),i()(),s(136,Ie,2,1,"div",19),i(),e(137,"div",68)(138,"input",69),_("change",function(a){v(t);let d=f();return x(d.onFileSelected(a))}),i()()()}if(n&2){let t,l,a,d,b,I,R,G,c=f();m(3),y("formGroup",c.formGroup),m(26),p((t=c.formGroup.get("type"))!=null&&t.invalid&&c.attemptedSubmit()?29:-1),m(7),p((l=c.formGroup.get("name"))!=null&&l.invalid&&c.attemptedSubmit()?36:-1),m(18),p((a=c.formGroup.get("streetAddress"))!=null&&a.invalid&&c.attemptedSubmit()?54:-1),m(23),p((d=c.formGroup.get("leaseType"))!=null&&d.invalid&&c.attemptedSubmit()?77:-1),m(11),p((b=c.formGroup.get("expectedRent"))!=null&&b.invalid&&c.attemptedSubmit()?88:-1),m(28),p((I=c.formGroup.get("furnished"))!=null&&I.invalid&&c.attemptedSubmit()?116:-1),m(5),O(c.amenities),m(8),p((R=c.formGroup.get("title"))!=null&&R.invalid&&c.attemptedSubmit()?129:-1),m(7),p((G=c.formGroup.get("description"))!=null&&G.invalid&&c.attemptedSubmit()?136:-1)}}function Ge(n,r){n&1&&u(0,"app-loader")}var ce=class n{constructor(r,t,l,a){this.modalService=r;this.commonService=t;this.el=l;this.router=a;let d=localStorage.getItem("rent-hub");d&&this.rentalRecords.set(JSON.parse(d))}attemptedSubmit=E(!1);showLoader=E(!1);modalOptions=oe;amenities=re;rentalRecords=E([]);fb=A(te);formGroup=this.fb.group({type:["",h.required],name:["",h.required],sharedProperty:[""],streetAddress:["",h.required],sqFt:[""],leaseType:["",h.required],expectedRent:["",h.required],negotiable:[""],priceMode:[""],furnished:["",h.required],title:["",h.required],description:["",h.required],amenity:[""],amenitiesIncluded:this.fb.array([]),buildingImage:this.fb.array([]),comments:this.fb.array([])});back(){this.router.navigate(["/rent-hub/home"])}discard(){this.modalService.open(P,S(C({},this.modalOptions),{size:"s"})).closed.subscribe(t=>{t&&this.formGroup.reset()})}preview(){let r=this.modalService.open(de,S(C({},this.modalOptions),{size:"lg"}));r.componentInstance.rentItem=this.formGroup.value,r.componentInstance.showPreview=!0,r.closed.subscribe(t=>{})}addPost(){if(this.attemptedSubmit.set(!0),this.validateForm()){let r=this.modalService.open(P,S(C({},this.modalOptions),{size:"s"}));r.componentInstance.header="Are you sure you want to publish details for rental ? please check details before publishing for the rental",r.componentInstance.buttonLabel="publish",r.componentInstance.customStyle="btn btn-primary",r.componentInstance.navigate=!1,r.closed.subscribe(t=>{t&&(this.showLoader.set(!0),setTimeout(()=>{let l=S(C({},this.formGroup.value),{id:this.rentalRecords().length,publisherEmail:localStorage.getItem("userName")});this.rentalRecords.set([...this.rentalRecords(),l]),localStorage.setItem("rent-hub",JSON.stringify(this.rentalRecords())),this.formGroup.reset(),this.showLoader.set(!1);let a=this.modalService.open(le,S(C({},this.modalOptions),{size:"m"}));a.componentInstance.header="Thanks for sharing your space! Your listing is now active on Rental Hub.",a.closed.subscribe(d=>{d&&this.router.navigate([""])})},1500))})}}validateForm(){return this.formGroup.valid?(this.attemptedSubmit.set(!1),!0):(setTimeout(()=>{this.scrollToInvalidControl()},100),!1)}scrollToInvalidControl(){setTimeout(()=>{this.commonService.scrollToFirstInvalidControl(this.el)},100)}get amenitiesIncluded(){return this.formGroup.get("amenitiesIncluded")}onAmenityChange(r,t){let l=r.target.checked,a=this.amenitiesIncluded;if(l)a.push(this.fb.control(t));else{let d=a.controls.findIndex(b=>b.value===t);d!==-1&&a.removeAt(d)}}onFileSelected(r){let t=r.target.files,l=this.formGroup.get("buildingImage");for(let a=0;a<t.length;a++){let d=t[a];if(d&&d.type.startsWith("image/")){let b=URL.createObjectURL(d);l.push(this.fb.control(b))}}this.formGroup.patchValue({buildingImage:l}),this.formGroup.updateValueAndValidity()}static \u0275fac=function(t){return new(t||n)(g(ne),g(me),g(N),g(U))};static \u0275cmp=M({type:n,selectors:[["app-new-post"]],decls:4,vars:1,consts:[["loader",""],[4,"ngTemplateOutlet"],[1,"back-arrow","p-2","mx-5","mt-2","d-flex","alig-items-center"],[1,"btn","btn-outline-primary",3,"click"],[1,"container","py-4","my-3",3,"formGroup"],[1,"form-title"],[1,"form-subtitle"],[1,"buttons","d-flex","gap-3","align-items-center","justify-content-end"],[1,"btn","btn-outline-secondary",3,"click"],[1,"btn",2,"color","#1a237e","border-color","#1a237e",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"row","g-3","mb-3","mt-3"],[1,"col-md-6","form-floating"],["name","type","id","type","formControlName","type","placeholder","choose your apartment/building",1,"form-select"],["value",""],["value","APARTMENT"],["value","BUILDING"],["for","type",1,"mx-2"],[1,"required"],[1,"d-block","invalid","error-message"],["formControlName","name","id","name","placeholder","Building Name",1,"form-control"],["for","name",1,"mx-2"],[1,"mb-4"],[1,"form-label","d-block"],[1,"form-check","form-check-inline"],["type","radio","formControlName","sharedProperty","id","sharedYes","value","true",1,"form-check-input"],["for","sharedYes",1,"form-check-label"],["type","radio","formControlName","sharedProperty","id","sharedNo","value","false",1,"form-check-input"],["for","sharedNo",1,"form-check-label"],[1,"form-floating","mb-4"],["formControlName","streetAddress","id","streetAddress","placeholder","streetAddress",1,"form-control"],["for","streetAddress"],[1,"row","g-3","mb-4"],["appNumbersonly","","formControlName","sqFt","id","sqFt","placeholder","Square Feet",1,"form-control"],["for","sqFt",1,"mx-2"],[1,"col-md-6"],[1,"form-label"],[1,"form-check"],["type","radio","formControlName","leaseType","id","long","value","LONG_TERM",1,"form-check-input"],["for","long",1,"form-check-label"],["type","radio","formControlName","leaseType","id","short","value","SHORT_TERM",1,"form-check-input"],["for","short",1,"form-check-label"],["type","radio","formControlName","leaseType","id","both","value","BOTH",1,"form-check-input"],["for","both",1,"form-check-label"],[1,"formlabel"],[1,"row","g-3","align-items-center"],[1,"col-md-4","form-floating"],["appNumbersonly","","type","text","formControlName","expectedRent","id","expectedRent","placeholder","Expected Rent",1,"form-control"],["for","expectedRent",1,"mx-2"],[1,"col-md-2"],["type","checkbox","formControlName","negotiable","id","negotiable",1,"form-check-input"],["for","negotiable",1,"form-check-label"],[1,"col-md-3"],["type","radio","formControlName","priceMode","id","perMonth","value","Per Month",1,"form-check-input"],["for","perMonth",1,"form-check-label"],["type","radio","formControlName","priceMode","id","utilities","value","Utilities Included",1,"form-check-input"],["for","utilities",1,"form-check-label"],["type","radio","formControlName","furnished","id","furnishedYes","value","Yes",1,"form-check-input"],["for","furnishedYes",1,"form-check-label"],["type","radio","formControlName","furnished","id","furnishedNo","value","No",1,"form-check-input"],["for","furnishedNo",1,"form-check-label"],[1,"row"],[1,"col-md-4","mb-2"],[1,"form-floating","mb-3"],["formControlName","title","id","title","placeholder","Add Title",1,"form-control"],["for","title"],["formControlName","description","placeholder","Description","id","description",1,"form-control",2,"height","120px"],["for","description"],[1,"input-group","mb-3"],["type","file","id","buildingImage",1,"form-control","p-2",3,"change"],[1,"invalid"],["type","checkbox",1,"form-check-input",3,"change","id"],[1,"form-check-label",3,"for"]],template:function(t,l){t&1&&(s(0,ue,1,1,"ng-container")(1,Re,139,9),T(2,Ge,1,0,"ng-template",null,0,H)),t&2&&p(l.showLoader()?0:1)},dependencies:[ie,Z,ee,z,Y,X,W,$,J,K,Q,w,j,ae],styles:[".form-title[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-size:2rem;font-weight:600;color:#1a237e;margin-bottom:1rem;text-align:center}.form-subtitle[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-size:1rem;color:#555;text-align:end;margin-bottom:2rem}input[type=radio][_ngcontent-%COMP%]{margin-right:.5rem}input[type=checkbox][_ngcontent-%COMP%], .form-check-label[_ngcontent-%COMP%]:hover{cursor:pointer}.container[_ngcontent-%COMP%]{background-color:#c8f0f6;padding:100px}"]})};export{ce as NewPost};
